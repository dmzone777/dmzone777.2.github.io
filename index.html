<!DOCTYPE html>
<html>
<head>
<title>Ultra Smooth SlowMo Master</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>

/* ===== Animated Gradient BG ===== */
body{
margin:0;
font-family:Poppins,Arial;
background:linear-gradient(-45deg,#667eea,#764ba2,#6a11cb,#2575fc);
background-size:400% 400%;
animation:bgMove 10s ease infinite;
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

@keyframes bgMove{
0%{background-position:0% 50%;}
50%{background-position:100% 50%;}
100%{background-position:0% 50%;}
}

/* ===== Glass Card ===== */
.card{
background:rgba(255,255,255,0.15);
backdrop-filter:blur(15px);
padding:22px;
border-radius:20px;
width:360px;
box-shadow:0 20px 40px rgba(0,0,0,0.35);
text-align:center;
color:white;
border:1px solid rgba(255,255,255,0.2);
}

/* ===== Video ===== */
video{
width:100%;
border-radius:12px;
margin-top:12px;
box-shadow:0 8px 18px rgba(0,0,0,0.3);
}

/* ===== Inputs & Buttons ===== */
button,input{
width:100%;
padding:11px;
margin-top:12px;
border-radius:10px;
border:none;
outline:none;
font-size:14px;
}

/* ===== File input ===== */
input[type=file]{
background:rgba(255,255,255,0.2);
color:white;
cursor:pointer;
}

/* ===== Buttons ===== */
button{
background:linear-gradient(45deg,#ff6ec4,#7873f5);
color:white;
font-weight:bold;
cursor:pointer;
transition:.3s;
box-shadow:0 5px 15px rgba(0,0,0,0.3);
}

button:hover{
transform:translateY(-3px) scale(1.02);
box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

/* ===== Slider style ===== */
input[type=range]{
appearance:none;
height:7px;
background:rgba(255,255,255,0.3);
}

input[type=range]::-webkit-slider-thumb{
appearance:none;
width:18px;
height:18px;
border-radius:50%;
background:#fff;
cursor:pointer;
box-shadow:0 0 10px rgba(255,255,255,0.9);
}

/* ===== Label ===== */
label{
font-size:13px;
margin-top:6px;
display:block;
opacity:0.9;
}

/* ===== Heading glow ===== */
h2{
margin:0;
text-shadow:0 0 10px rgba(255,255,255,0.7);
}

</style>
</head>

<body>

<div class="card">
<h2>Ultra Smooth SlowMo ðŸŽ¬</h2>

<input type="file" id="videoInput" accept="video/*">
<video id="video" controls loop></video>

<label>Speed</label>
<input type="range" id="speed" min="0.25" max="1" step="0.25" value="0.5">

<button onclick="setSpeed(0.25)">0.25x</button>
<button onclick="setSpeed(0.5)">0.5x</button>
<button onclick="setSpeed(0.75)">0.75x</button>

<label>Trim Start</label>
<input type="range" id="start" min="0" max="100" value="0">

<label>Trim End</label>
<input type="range" id="end" min="0" max="100" value="100">

<button onclick="exportSlow()">Export MP4</button>
</div>

<script>
const video=document.getElementById("video");
const input=document.getElementById("videoInput");
const speed=document.getElementById("speed");
const start=document.getElementById("start");
const end=document.getElementById("end");

input.onchange=e=>{
video.src=URL.createObjectURL(e.target.files[0]);
}

speed.oninput=()=> video.playbackRate=speed.value;

function setSpeed(v){
video.playbackRate=v;
speed.value=v;
}

video.addEventListener("timeupdate",()=>{
if(video.duration){
const endTime=(end.value/100)*video.duration;
if(video.currentTime>=endTime) video.pause();
}
});

async function exportSlow(){
const canvas=document.createElement("canvas");
const ctx=canvas.getContext("2d");

canvas.width=video.videoWidth;
canvas.height=video.videoHeight;

const stream=canvas.captureStream(90);
const recorder=new MediaRecorder(stream);
let chunks=[];

recorder.ondataavailable=e=>chunks.push(e.data);
recorder.onstop=e=>{
const blob=new Blob(chunks,{type:"video/webm"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="slowmo.mp4";
a.click();
}

recorder.start();

video.currentTime=(start.value/100)*video.duration;
video.playbackRate=speed.value*0.8;
video.play();

let lastFrame=null;

function draw(){
ctx.globalAlpha=0.35;
if(lastFrame) ctx.drawImage(lastFrame,0,0,canvas.width,canvas.height);

ctx.globalAlpha=0.85;
ctx.filter="blur(0.3px)";
ctx.drawImage(video,0,0,canvas.width,canvas.height);
ctx.filter="none";

lastFrame=document.createElement("canvas");
lastFrame.width=canvas.width;
lastFrame.height=canvas.height;
lastFrame.getContext("2d").drawImage(canvas,0,0);

ctx.globalAlpha=0.25;
ctx.drawImage(video,0,0,canvas.width,canvas.height);
ctx.globalAlpha=1;

const endTime=(end.value/100)*video.duration;

if(!video.paused && !video.ended && video.currentTime<endTime){
setTimeout(()=>requestAnimationFrame(draw),1000/90);
}else{
recorder.stop();
}
}
draw();
}
</script>

</body>
</html>